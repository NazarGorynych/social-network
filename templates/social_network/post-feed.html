{% extends 'social_network/layouts/main-layout.html' %}
{% block title %}
Post feed
{% endblock %}
{% load widget_tweaks %}

{% block body %}
<br>
<div class="container">
    {% for post in all_posts %}
        <div class="container border border-secondary rounded"  style="max-width: 900px; margin-left: 0">
            <div class="p-3">
                <a class="h4" style="margin-left: 30px"> {{ post.title }}</a>
                <small class="text text-muted" style="float: right">{{ post.published_date }} </small>
                <div class="p-2">
                    <p>{{ post.text }}</p>
                </div>
                <div class="p-3">
                <form action="{% url 'like_post' post.pk %}" method="post">
                    <a>{{ post.total_likes }}</a>
                    {% csrf_token %}
                    {% if post.num_likes.exists %}
                    <button class="btn-sm btn-primary">Dislike</button>
                    {% else %}
                    <button class="btn-sm btn-primary" type="submit" name="post_id" value="{{ post.id }}">Like</button>
                    {% endif %}
                </form>
                <p class="h8" style="float: right; margin-top: -20px">Author: <a class="link-primary text-decoration-none h6" href="">{{ post.author }}</a></p>
                </div>
            </div>
        </div>
        <br>
    {% endfor %}
</div>
{% endblock %}